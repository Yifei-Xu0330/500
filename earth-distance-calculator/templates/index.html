<!-- templates/index.html (简化版) -->
<!DOCTYPE html>
<html>
<head>
    <title>地球距离计算器</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: inline-block; width: 150px; }
        input, select { padding: 5px; width: 80px; }
        .dms-input { display: none; }
        .results { margin-top: 30px; padding: 15px; background: #f0f8ff; border-radius: 5px; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>地球坐标距离计算器</h1>
    
    <form method="POST">
        <div>
            <label>输入格式:</label>
            <input type="radio" name="input_format" value="dms" checked onchange="toggleFormat()"> 度分秒
            <input type="radio" name="input_format" value="radians" onchange="toggleFormat()"> 弧度
        </div>
        
        <h2>点1坐标</h2>
        <div id="dms1" class="dms-input">
            <div class="form-group">
                <label>纬度:</label>
                <input type="number" name="lat1_deg" placeholder="度" value="0">
                <input type="number" name="lat1_min" placeholder="分" value="0">
                <input type="number" name="lat1_sec" placeholder="秒" value="0" step="0.01">
                <select name="lat1_dir">
                    <option value="N">北纬</option>
                    <option value="S">南纬</option>
                </select>
            </div>
            <div class="form-group">
                <label>经度:</label>
                <input type="number" name="lon1_deg" placeholder="度" value="0">
                <input type="number" name="lon1_min" placeholder="分" value="0">
                <input type="number" name="lon1_sec" placeholder="秒" value="0" step="0.01">
                <select name="lon1_dir">
                    <option value="E">东经</option>
                    <option value="W">西经</option>
                </select>
            </div>
        </div>
        
        <div id="rad1" class="rad-input" style="display:none">
            <div class="form-group">
                <label>纬度(弧度):</label>
                <input type="number" name="lat1_rad" value="0" step="0.0001">
            </div>
            <div class="form-group">
                <label>经度(弧度):</label>
                <input type="number" name="lon1_rad" value="0" step="0.0001">
            </div>
        </div>
        
        <div class="form-group">
            <label>高度(米):</label>
            <input type="number" name="alt1" value="0" step="1">
        </div>
        
        <!-- 点2坐标表单（类似点1） -->
        <h2>点2坐标</h2>
        <div id="dms2" class="dms-input">
            <!-- 类似点1的度分秒输入 -->
        </div>
        
        <div id="rad2" class="rad-input" style="display:none">
            <!-- 类似点1的弧度输入 -->
        </div>
        
        <div class="form-group">
            <label>高度(米):</label>
            <input type="number" name="alt2" value="0" step="1">
        </div>
        
        <button type="submit">计算距离</button>
    </form>
    
    {% if results %}
    <div class="results">
        {% if results.error %}
            <p class="error">{{ results.error }}</p>
        {% else %}
            <h3>计算结果</h3>
            <p>地球表面距离: {{ "%.2f"|format(results.surface_dist) }} 米 ({{ "%.2f"|format(results.surface_dist/1000) }} 公里)</p>
            <p>空间直线距离: {{ "%.2f"|format(results.straight_dist) }} 米 ({{ "%.2f"|format(results.straight_dist/1000) }} 公里)</p>
            
            <h3>坐标信息</h3>
            <p>点1: 纬度 {{ "%.6f"|format(results.point1[0]) }}, 经度 {{ "%.6f"|format(results.point1[1]) }}, 高度 {{ results.point1[2] }}米</p>
            <p>点2: 纬度 {{ "%.6f"|format(results.point2[0]) }}, 经度 {{ "%.6f"|format(results.point2[1]) }}, 高度 {{ results.point2[2] }}米</p>
        {% endif %}
    </div>
    {% endif %}
    
    <script>
        function toggleFormat() {
            const format = document.querySelector('input[name="input_format"]:checked').value;
            document.querySelectorAll('.dms-input').forEach(el => {
                el.style.display = format === 'dms' ? 'block' : 'none';
            });
            document.querySelectorAll('.rad-input').forEach(el => {
                el.style.display = format === 'radians' ? 'block' : 'none';
            });
        }
        
        // 初始设置
        window.onload = toggleFormat;
    </script>
</body>
</html>